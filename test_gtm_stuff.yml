---
    - name: Restore configuration of F5 virtual servers 
      hosts: localhost 
      connection: local
      gather_facts: true
    
      tasks:   
      - name: Load JSON file  
        set_fact:
            parsed_gtm_pool_stats: "{{ lookup('file', 'f5.home.lab-gtm_pool_stats.json') | from_json }}"

      - name: save output
        template: 
          src: gtm.j2 
          dest: "./output/pre_change-{{ inventory_hostname }}-gtm_pool_stats-{{ ansible_date_time.iso8601 }}.txt"


          
  ## Add more members and iterate pool 
  #    - name: debug
  #      debug:
  #        msg: "{{ item['poolName']['description'] }}, {{ item['vsName']['description'] }}, {{ item['status.availabilityState']['description'] }}" 
  #      loop: "{{ test_gtm_pool }}"
